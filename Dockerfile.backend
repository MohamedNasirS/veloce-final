FROM node:20  # Upgrade to Node.js 20 to resolve EBADENGINE warnings
WORKDIR /app
COPY backend/package*.json ./
RUN npm install
COPY backend/prisma ./prisma/
RUN npx prisma generate  # Generate Prisma client during build
COPY backend ./
RUN npm run build
EXPOSE 3001  # Adjust if your backend uses a different port
CMD ["npm", "run", "start:dev"]